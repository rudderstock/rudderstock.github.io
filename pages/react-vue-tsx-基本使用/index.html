<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>react-vue-tsx 基本使用 | 木德东</title>
<meta name=keywords content><meta name=description content="tags:: vue, react
本文主要面向 react 开发人员快速上手 vue 的 .tsx 组件开发
Tsx 在 vue 项目中，如果不太熟悉、不想使用 vue 模板语法的开发方式，可以通过 vite 相关插件，使用 tsx 进行组件编写
优点：
可以使用更加灵活的 jsx 来进行开发 logseq.order-list-type:: number
可以单个文件里可以输出多个小组件 logseq.order-list-type:: number
更加灵活的js配置，不需要忍受 .vue 模版里的的魔法配置 logseq.order-list-type:: number
减少 all in one（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理 logseq.order-list-type:: number
使用 model.confirm 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 template 里，再声明 ref 来进行各种控制 logseq.order-list-type:: number
缺点：
无法使用 css scope，可以使用 css-modules 或者其他方式来进行样式隔离，习惯了 :deep 等方式的开发人员可能会不太适应 logseq.order-list-type:: number
其他成员难维护，未接触过 react 框架的 vue 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们 logseq.order-list-type:: number"><meta name=author content="木德东"><link rel=canonical href=https://rudderstock.github.io/pages/react-vue-tsx-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/><link crossorigin=anonymous href=/assets/css/stylesheet.min.49b1c3611e5e823e974d0b9b3e1101617fce26c004757161abb1a1e4af3ff85c.css integrity="sha256-SbHDYR5egj6XTQubPhEBYX/OJsAEdXFhq7Gh5K8/+Fw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.30d2332871da51f600f574811c17751e6c862577d450b624f86e2bc8a6e31221.js integrity="sha256-MNIzKHHaUfYA9XSBHBd1HmyGJXfUULYk+G4ryKbjEiE=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://rudderstock.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rudderstock.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rudderstock.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://rudderstock.github.io/apple-touch-icon.png><link rel=mask-icon href=https://rudderstock.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.123.8"><link rel=alternate hreflang=en href=https://rudderstock.github.io/pages/react-vue-tsx-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="react-vue-tsx 基本使用"><meta property="og:description" content="tags:: vue, react
本文主要面向 react 开发人员快速上手 vue 的 .tsx 组件开发
Tsx 在 vue 项目中，如果不太熟悉、不想使用 vue 模板语法的开发方式，可以通过 vite 相关插件，使用 tsx 进行组件编写
优点：
可以使用更加灵活的 jsx 来进行开发 logseq.order-list-type:: number
可以单个文件里可以输出多个小组件 logseq.order-list-type:: number
更加灵活的js配置，不需要忍受 .vue 模版里的的魔法配置 logseq.order-list-type:: number
减少 all in one（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理 logseq.order-list-type:: number
使用 model.confirm 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 template 里，再声明 ref 来进行各种控制 logseq.order-list-type:: number
缺点：
无法使用 css scope，可以使用 css-modules 或者其他方式来进行样式隔离，习惯了 :deep 等方式的开发人员可能会不太适应 logseq.order-list-type:: number
其他成员难维护，未接触过 react 框架的 vue 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们 logseq.order-list-type:: number"><meta property="og:type" content="article"><meta property="og:url" content="https://rudderstock.github.io/pages/react-vue-tsx-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><meta property="article:section" content="pages"><meta property="article:published_time" content="2024-03-10T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-12T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="react-vue-tsx 基本使用"><meta name=twitter:description content="tags:: vue, react
本文主要面向 react 开发人员快速上手 vue 的 .tsx 组件开发
Tsx 在 vue 项目中，如果不太熟悉、不想使用 vue 模板语法的开发方式，可以通过 vite 相关插件，使用 tsx 进行组件编写
优点：
可以使用更加灵活的 jsx 来进行开发 logseq.order-list-type:: number
可以单个文件里可以输出多个小组件 logseq.order-list-type:: number
更加灵活的js配置，不需要忍受 .vue 模版里的的魔法配置 logseq.order-list-type:: number
减少 all in one（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理 logseq.order-list-type:: number
使用 model.confirm 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 template 里，再声明 ref 来进行各种控制 logseq.order-list-type:: number
缺点：
无法使用 css scope，可以使用 css-modules 或者其他方式来进行样式隔离，习惯了 :deep 等方式的开发人员可能会不太适应 logseq.order-list-type:: number
其他成员难维护，未接触过 react 框架的 vue 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们 logseq.order-list-type:: number"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pages","item":"https://rudderstock.github.io/pages/"},{"@type":"ListItem","position":2,"name":"react-vue-tsx 基本使用","item":"https://rudderstock.github.io/pages/react-vue-tsx-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"react-vue-tsx 基本使用","name":"react-vue-tsx 基本使用","description":"tags:: vue, react\n本文主要面向 react 开发人员快速上手 vue 的 .tsx 组件开发\nTsx 在 vue 项目中，如果不太熟悉、不想使用 vue 模板语法的开发方式，可以通过 vite 相关插件，使用 tsx 进行组件编写\n优点：\n可以使用更加灵活的 jsx 来进行开发 logseq.order-list-type:: number\n可以单个文件里可以输出多个小组件 logseq.order-list-type:: number\n更加灵活的js配置，不需要忍受 .vue 模版里的的魔法配置 logseq.order-list-type:: number\n减少 all in one（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理 logseq.order-list-type:: number\n使用 model.confirm 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 template 里，再声明 ref 来进行各种控制 logseq.order-list-type:: number\n缺点：\n无法使用 css scope，可以使用 css-modules 或者其他方式来进行样式隔离，习惯了 :deep 等方式的开发人员可能会不太适应 logseq.order-list-type:: number\n其他成员难维护，未接触过 react 框架的 vue 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们 logseq.order-list-type:: number","keywords":[],"articleBody":"tags:: vue, react\n本文主要面向 react 开发人员快速上手 vue 的 .tsx 组件开发\nTsx 在 vue 项目中，如果不太熟悉、不想使用 vue 模板语法的开发方式，可以通过 vite 相关插件，使用 tsx 进行组件编写\n优点：\n可以使用更加灵活的 jsx 来进行开发 logseq.order-list-type:: number\n可以单个文件里可以输出多个小组件 logseq.order-list-type:: number\n更加灵活的js配置，不需要忍受 .vue 模版里的的魔法配置 logseq.order-list-type:: number\n减少 all in one（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理 logseq.order-list-type:: number\n使用 model.confirm 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 template 里，再声明 ref 来进行各种控制 logseq.order-list-type:: number\n缺点：\n无法使用 css scope，可以使用 css-modules 或者其他方式来进行样式隔离，习惯了 :deep 等方式的开发人员可能会不太适应 logseq.order-list-type:: number\n其他成员难维护，未接触过 react 框架的 vue 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们 logseq.order-list-type:: number\n.tsx 引用自己项目创建的 .vue 的组件，没有相关类型声明，需要自己手动或者通过其他手段添加声明类型 logseq.order-list-type:: number\nvue 重点还是放在 .vue 组件，后续 .tsx 更新优化力度不会太大 logseq.order-list-type:: number\nref.value 这个 .value 使用时还是有点烦，绑定时经常需要注意 logseq.order-list-type:: number\nBabel 设置 安装相关插件 npm i @vitejs/plugin-vue-jsx -D vite.config.ts // vite.config.js import vueJsx from '@vitejs/plugin-vue-jsx' export default { plugins: [ vueJsx({ // options are passed on to @vue/babel-plugin-jsx }), ], } 创建组件 有以下几种方式创建组件 // 选项语法 function defineComponent( component: ComponentOptions ): ComponentConstructor // 函数语法 (需要 3.3+) function defineComponent( setup: ComponentOptions['setup'], extraOptions?: ComponentOptions ): () =\u003e any // 函数组件 export const Button = props =\u003e { return \u003cdiv\u003e{props.name}\u003c/div\u003e; }; defineComponent 可以通过创建 props 变量，进行管理和复用\n选项语法和函数语法只是写法不一样，看个人习惯\nconst ButtonProps = { name: { type: String, default: 'hello' } } // 函数语法 export default defineComponent((props, { emit }) =\u003e { return () =\u003e { return \u003cdiv\u003e{props.name}\u003c/div\u003e; }; }, { props: ButtonProps }); // 选项语法 export const Button = defineComponent({ props: ButtonProps, setup(props, ctx) { return () =\u003e { return \u003cdiv\u003e\u003c/div\u003e } } }) 函数组件 该方式无法函数内创建 State，能不用就不用，只适用于非常简单的组件，例如下面示例： import { ref } from 'vue' const RcButton = () =\u003e { const count = ref(0) function onClick() { count.value++ } return ( \u003cdiv\u003e \u003cdiv\u003e 数字 : {count.value}\u003c/div\u003e \u003cbutton onClick={onClick}\u003e点我+1\u003c/button\u003e \u003c/div\u003e ) } + 点击按钮后，视图仍然显示为 0，点击事件无任何作用 是否能使用 React.FC 方式创建函数组件 是否能像 const component: FC = (props) =\u003e 快速生成组件\n只能说，看起来可以，但基本上不行，还是要写传统的 Props 变量来进行约束，如下所示：\ndefineComponent 看起来似乎可以传定义过去，而且使用时，编辑器也有相关提示 import { defineComponent } from 'vue' interface ButtonProps { type: 'primary' | 'ghost', content: string } export default defineComponent\u003cButtonProps\u003e((props) =\u003e { return () =\u003e { return \u003cdiv\u003e{props.content}\u003c/div\u003e } }) + 但组件使用后，传的值并没有传到 `props` 上，而是 `attrs` 上，只是看起来像生效了而已 + ## FunctionalComponent + 虽然可以通过泛型来快速定义，`props` 也有值，编辑器有类型提示，但无法定义 `State`，基本上无用 interface ButtonProps { type: string } const RcButton: FunctionalComponent\u003cButtonProps\u003e = (props, { attrs }) =\u003e { console.log('props', props) console.log('attrs', attrs) return ( \u003cdiv\u003e \u003cdiv\u003e{props.type}\u003c/div\u003e \u003c/div\u003e ) } + `props` 和 `attrs` 传值一样，将就的话怎么说也能用 基本使用 如下所示：简单的点击按钮，数字加一 import { defineComponent, type PropType } from 'vue' import { useVModel } from '@vueuse/core' export default defineComponent({ props: { type: String as PropType\u003c'primary' | 'warning'\u003e, modelValue: { type: Number, required: true } }, emits: ['update:modelValue'], setup(props, { emit }) { const count = useVModel(props, 'modelValue', emit, { defaultValue: 0 }) function onButtonClick() { count.value += 1 } return () =\u003e { return ( \u003cdiv\u003e \u003cdiv\u003e数字是 {count.value}\u003c/div\u003e \u003cbutton onClick={onButtonClick}\u003e点我+1\u003c/button\u003e \u003c/div\u003e ) } } }) 使用下来，结构上大概可以分三个区域： 第一区域：用于定义 props、emit、slots 等相关外部属性； logseq.order-list-type:: number\n第二区域：用于定义声明 state 组件内部状态，比如创建各种变量、ref、watch、computed 等相关操作，一些性质类似于 React.Component 的 constructor，可以定义类型，只执行一次，不过能添加 watch，生命周期等相关操作； logseq.order-list-type:: number\n第三区域：可以理解为 render 的函数，只要发生渲染，就会执行； logseq.order-list-type:: number\n刚开始接触 .tsx 可能很难绕过来弯，初次上手，可以 setup 下当成 constructor 来使用，应该能稍微好上手一点。\n后续 ","wordCount":"450","inLanguage":"en","datePublished":"2024-03-10T00:00:00Z","dateModified":"2024-03-12T00:00:00Z","author":{"@type":"Person","name":"木德东"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rudderstock.github.io/pages/react-vue-tsx-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"},"publisher":{"@type":"Organization","name":"木德东","logo":{"@type":"ImageObject","url":"https://rudderstock.github.io/favicon.ico"}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-00000XXXXX"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),-gtag("config","G-00000XXXXX")</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://rudderstock.github.io/ accesskey=h title="木德东 (Alt + H)">木德东</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://rudderstock.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://rudderstock.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://rudderstock.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://rudderstock.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>react-vue-tsx 基本使用</h1><div class=post-meta>&lt;span title='2024-03-10 00:00:00 +0000 UTC'>March 10, 2024&lt;/span>&amp;nbsp;·&amp;nbsp;3 min&amp;nbsp;·&amp;nbsp;木德东</div></header><div class=post-content><p>tags:: vue, react</p><blockquote><p>本文主要面向 <code>react</code> 开发人员快速上手 <code>vue</code> 的 <code>.tsx</code> 组件开发</p></blockquote><h1 id=tsx>Tsx<a hidden class=anchor aria-hidden=true href=#tsx>#</a></h1><ul><li><p>在 <code>vue</code> 项目中，如果不太熟悉、不想使用 <code>vue</code> 模板语法的开发方式，可以通过 <code>vite</code> 相关插件，使用 <code>tsx</code> 进行组件编写</p></li><li><p>优点：</p><ul><li><p>可以使用更加灵活的 <code>jsx</code> 来进行开发
logseq.order-list-type:: number</p></li><li><p>可以单个文件里可以输出多个小组件
logseq.order-list-type:: number</p></li><li><p>更加灵活的<code>js</code>配置，不需要忍受 <code>.vue</code> 模版里的的魔法配置
logseq.order-list-type:: number</p></li><li><p>减少 <code>all in one</code>（页面组件代码 4000 + 行） 概率，文件内可以各种变量导出，重复内容也可以很方便的进行管理
logseq.order-list-type:: number</p></li><li><p>使用 <code>model.confirm</code> 等函数方式调用组件，可以很方便的个性化自定义标签，不需要频繁塞进 <code>template</code> 里，再声明 <code>ref</code> 来进行各种控制
logseq.order-list-type:: number</p></li></ul></li><li><p>缺点：</p><ul><li><p>无法使用 <code>css scope</code>，可以使用 <code>css-modules</code> 或者其他方式来进行样式隔离，习惯了 <code>:deep</code> 等方式的开发人员可能会不太适应
logseq.order-list-type:: number</p></li><li><p>其他成员难维护，未接触过 <code>react</code> 框架的 <code>vue</code> 开发人员，大概率无法接受和学习开发，需要靠你自己维护或者培训他们
logseq.order-list-type:: number</p></li><li><p><code>.tsx</code> 引用自己项目创建的 <code>.vue</code> 的组件，没有相关类型声明，需要自己手动或者通过其他手段添加声明类型
logseq.order-list-type:: number</p></li><li><p><code>vue</code> 重点还是放在 <code>.vue</code> 组件，后续 <code>.tsx</code> 更新优化力度不会太大
logseq.order-list-type:: number</p></li><li><p><code>ref.value</code> 这个 <code>.value</code> 使用时还是有点烦，绑定时经常需要注意
logseq.order-list-type:: number</p></li></ul></li></ul><h2 id=babel-设置>Babel 设置<a hidden class=anchor aria-hidden=true href=#babel-设置>#</a></h2><ul><li>安装相关插件</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm i @vitejs/plugin-vue-jsx -D
</span></span></code></pre></div><ul><li><code>vite.config.ts</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>// vite.config.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>vueJsx</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@vitejs/plugin-vue-jsx&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vueJsx</span>({
</span></span><span style=display:flex><span>      <span style=color:#75715e>// options are passed on to @vue/babel-plugin-jsx
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }),
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=创建组件>创建组件<a hidden class=anchor aria-hidden=true href=#创建组件>#</a></h2><ul><li>有以下几种方式创建组件</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// 选项语法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>defineComponent</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>component</span>: <span style=color:#66d9ef>ComponentOptions</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>ComponentConstructor</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数语法 (需要 3.3+)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>defineComponent</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setup</span>: <span style=color:#66d9ef>ComponentOptions</span>[<span style=color:#e6db74>&#39;setup&#39;</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>extraOptions?</span>: <span style=color:#66d9ef>ComponentOptions</span>
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> () <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>any</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span>&gt;{<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>name</span>}&lt;/<span style=color:#f92672>div</span>&gt;;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><ul><li><h3 id=definecomponent>defineComponent<a hidden class=anchor aria-hidden=true href=#definecomponent>#</a></h3><ul><li><p>可以通过创建 <code>props</code> 变量，进行管理和复用</p></li><li><p>选项语法和函数语法只是写法不一样，看个人习惯</p></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ButtonProps</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;hello&#39;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数语法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>defineComponent</span>((<span style=color:#a6e22e>props</span>, { <span style=color:#a6e22e>emit</span> }) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span>&gt;{<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>name</span>}&lt;/<span style=color:#f92672>div</span>&gt;;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>props</span>: <span style=color:#66d9ef>ButtonProps</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 选项语法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineComponent</span>({
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>props</span>: <span style=color:#66d9ef>ButtonProps</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>setup</span>(<span style=color:#a6e22e>props</span>, <span style=color:#a6e22e>ctx</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><ul><li><h3 id=函数组件>函数组件<a hidden class=anchor aria-hidden=true href=#函数组件>#</a></h3><ul><li>该方式无法函数内创建 <code>State</code>，能不用就不用，只适用于非常简单的组件，例如下面示例：</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RcButton</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>count</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onClick() {</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>count</span>.<span style=color:#a6e22e>value</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>div</span>&gt; <span style=color:#960050;background-color:#1e0010>数字</span> <span style=color:#f92672>:</span> {<span style=color:#a6e22e>count</span>.<span style=color:#a6e22e>value</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onClick</span>}&gt;<span style=color:#960050;background-color:#1e0010>点我</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>	)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><pre><code>+ 点击按钮后，视图仍然显示为 0，点击事件无任何作用
</code></pre><ul><li><h2 id=是否能使用-reactfcprops-方式创建函数组件>是否能使用 <code>React.FC&lt;Props></code> 方式创建函数组件<a hidden class=anchor aria-hidden=true href=#是否能使用-reactfcprops-方式创建函数组件>#</a></h2><ul><li><p>是否能像 <code>const component: FC&lt;Props> = (props) => &lt;div>&lt;/div></code> 快速生成组件</p></li><li><p>只能说，看起来可以，但基本上不行，还是要写传统的 <code>Props</code> 变量来进行约束，如下所示：</p></li><li><h2 id=definecomponent-1>defineComponent<a hidden class=anchor aria-hidden=true href=#definecomponent-1>#</a></h2><ul><li>看起来似乎可以传定义过去，而且使用时，编辑器也有相关提示</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>defineComponent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ButtonProps</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;ghost&#39;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>content</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>defineComponent</span>&lt;<span style=color:#f92672>ButtonProps</span>&gt;((<span style=color:#a6e22e>props</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span>&gt;{<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>content</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p><img loading=lazy src=/assets/image_1710075884899_0.png alt=image.png></p><pre><code>  + 但组件使用后，传的值并没有传到 `props` 上，而是 `attrs` 上，只是看起来像生效了而已
</code></pre><p><img loading=lazy src=/assets/image_1710076082940_0.png alt=image.png></p><pre><code>+ ## FunctionalComponent

  + 虽然可以通过泛型来快速定义，`props` 也有值，编辑器有类型提示，但无法定义 `State`，基本上无用
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ButtonProps</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RcButton</span>: <span style=color:#66d9ef>FunctionalComponent</span>&lt;<span style=color:#f92672>ButtonProps</span>&gt; <span style=color:#f92672>=</span> (<span style=color:#a6e22e>props</span>, { <span style=color:#a6e22e>attrs</span> }) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;props&#39;</span>, <span style=color:#a6e22e>props</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;attrs&#39;</span>, <span style=color:#a6e22e>attrs</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>			&lt;<span style=color:#f92672>div</span>&gt;{<span style=color:#a6e22e>props</span>.<span style=color:#66d9ef>type</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>	)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><pre><code>  + `props` 和 `attrs` 传值一样，将就的话怎么说也能用
</code></pre><p><img loading=lazy src=/assets/image_1710076451064_0.png alt=image.png></p><h2 id=基本使用>基本使用<a hidden class=anchor aria-hidden=true href=#基本使用>#</a></h2><ul><li>如下所示：简单的点击按钮，数字加一</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>defineComponent</span>, <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>PropType</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useVModel</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@vueuse/core&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>defineComponent</span>({
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> String <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>PropType</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>&#39;primary&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;warning&#39;</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>modelValue</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> Number,
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>emits</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;update:modelValue&#39;</span>],
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>setup</span>(<span style=color:#a6e22e>props</span>, { <span style=color:#a6e22e>emit</span> }) {
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>count</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useVModel</span>(<span style=color:#a6e22e>props</span>, <span style=color:#e6db74>&#39;modelValue&#39;</span>, <span style=color:#a6e22e>emit</span>, {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>defaultValue</span>: <span style=color:#66d9ef>0</span>
</span></span><span style=display:flex><span>		})
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onButtonClick() {</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>count</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>				&lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>					&lt;<span style=color:#f92672>div</span>&gt;<span style=color:#960050;background-color:#1e0010>数字是</span> {<span style=color:#a6e22e>count</span>.<span style=color:#a6e22e>value</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>					&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onButtonClick</span>}&gt;<span style=color:#960050;background-color:#1e0010>点我</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>				&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>			)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><ul><li>使用下来，结构上大概可以分三个区域：</li></ul><p><img loading=lazy src=/assets/image_1710077628671_0.png alt=image.png></p><ul><li><p>第一区域：用于定义 <code>props</code>、<code>emit</code>、<code>slots</code> 等相关外部属性；
logseq.order-list-type:: number</p></li><li><p>第二区域：用于定义声明 <code>state</code> 组件内部状态，比如创建各种变量、<code>ref</code>、<code>watch</code>、<code>computed</code> 等相关操作，一些性质类似于 <code>React.Component</code> 的 <code>constructor</code>，可以定义类型，只执行一次，不过能添加 <code>watch</code>，生命周期等相关操作；
logseq.order-list-type:: number</p></li><li><p>第三区域：可以理解为 <code>render</code> 的函数，只要发生渲染，就会执行；
logseq.order-list-type:: number</p></li><li></li><li><p>刚开始接触 <code>.tsx</code> 可能很难绕过来弯，初次上手，可以 <code>setup</code> 下当成 <code>constructor</code> 来使用，应该能稍微好上手一点。</p></li></ul><h2 id=后续>后续<a hidden class=anchor aria-hidden=true href=#后续>#</a></h2><ul><li></li></ul></div><aside><h4>No notes link to this note</h4></aside><aside class=related></aside><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://rudderstock.github.io/>木德东</a></span><br><span>Powered by
<a href=https://github.com/sawhney17/logseq-schrodinger rel=noopener target=_blank>Logseq Schrödinger</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>